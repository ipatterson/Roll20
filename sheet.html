<span class='style-wrapper'>
    <div class="top-grid">
        <span>
            <!-- Title? -->
        </span>
        <span>
            <div class="pageButtons">
                <button type="action" name="act_buildSheet">Build</button>
                <button type="action" name="act_weaponSheet">Weapons</button>
                <button type="action" name="act_armorSheet">Armor</button>
                <button type="action" name="act_skillSheet">Skills</button>
                <button type="action" name="act_inventorySheet">Inventory</button>
            </div>
        </span>
    </div>
    <span class="main-sheet">
        <div class="section-main">
            <!-- Column One -->
            <span class="main1">
                <input name="attr_tier_mod" type="hidden" value="0">
                <input type="hidden" value="0" name="attr_armorhp_mod" readonly>
                <input type="hidden" value="0" name="attr_armorap_mod" readonly>
                <h1>Level: <span name="attr_player_level"></span></h1>
                <input name="attr_player_level" type="hidden" value="0">
                <div class="stats-grid">
                    <span class="stat-box-hp">
                        <div class="stat-grid-hp">
                            <span class="text">HP</span>
                            <span class="curr"><input type="number" name="attr_hp"></span>
                            <span class="max">MAX:
                                <span name="attr_hp_max"></span>
                                <input type="hidden" name="attr_hp_max" readonly>
                            </span>
                        </div>
                    </span>
                    <span class="stat-box-mp">
                        <div class="stat-grid-mp">
                            <span class="text">MP</span>
                            <span class="curr"><input type="number" name="attr_mp"></span>
                            <span class="max">MAX:
                                <span name="attr_mp_max"></span>
                                <input type="hidden" name="attr_mp_max" readonly>
                            </span>
                        </div>
                    </span>
                    <span class="stat-box-ap">
                        <div class="stat-grid-ap">
                            <span class="text">AP</span>
                            <span class="curr"><input type="number" name="attr_ap"></span>
                            <span class="max">MAX:
                                <span name="attr_ap_max"></span>
                                <input type="hidden" name="attr_ap_max" readonly>
                            </span>
                        </div>
                    </span>
                </div>
                <h4>Equipment</h4>
                <span class='active-equipment'>
                    <input type="hidden" value="0" name="attr_eq_wpn_range" readonly>
                    <input type="hidden" value="0" name="attr_eq_wpn_block" readonly>
                    <input type="hidden" value="0" name="attr_eq_wpn_power" readonly>
                    <input type="hidden" value="None" name="attr_eq_wpn_source" readonly>
                    <input type="hidden" value="None" name="attr_eq_wpn_feature" readonly>
                    <input type="hidden" value="None" name="attr_eq_ar_name" readonly>
                    <input type="hidden" value="None" name="attr_eq_ar_weight" readonly>
                    <div class="eq-wpn-grid">
                        <span class="eq-wpn-grid-name">
                            <div class="lbl">WEAPON:</div>
                            <div class="val"><span name="attr_eq_wpn_name"></span>
                                <div>
                        </span>
                        <span class="eq-wpn-grid-source">
                            <div class="lbl">SOURCE:</div>
                            <div class="val"><span name="attr_eq_wpn_source"></span></div>
                        </span>
                        <span class="eq-wpn-grid-feature">
                            <div class="lbl">FEATURE:</div>
                            <div class="val"><span name="attr_eq_wpn_feature"></span></div>
                        </span>
                        <span class="eq-wpn-grid-arName">
                            <div class="lbl">ARMOR:</div>
                            <div class="val"><span name="attr_eq_ar_name"></span></div>
                        </span>
                        <span class="eq-wpn-grid-arWeight">
                            <div class="lbl">WEIGHT:</div>
                            <div class="val"><span name="attr_eq_ar_weight"></span></div>
                        </span>
                    </div>
                    <div class="eq-stats-grid">
                        <span class="eq-wpn-grid-power">
                            <div class="lbl">POWER:</div>
                            <div class="val"><span name="attr_eq_wpn_power"></span></div>
                        </span>
                        <span class="eq-wpn-grid-range">
                            <div class="lbl">RANGE:</div>
                            <div class="val"><span name="attr_eq_wpn_range"></span></div>
                        </span>
                        <span class="eq-wpn-grid-block">
                            <div class="lbl">BLOCK:</div>
                            <div class="val"><span name="attr_eq_wpn_block"></span></div>
                        </span>
                    </div>
                </span>
                <h4>Attributes & Actions</h4>
                <div class="modifier-inst"><span class="modifier-note">NOTE:</span> Rolls take into account modifier fields. Hit 'Enter' to apply modifier number changes!</div>
                <div class="attribute-grid-title">
                    <input type="hidden" value="3d20>8" name="attr_stat_base_dice_roll" readonly>
                    <input type="hidden" value="*" name="attr_stat_roll_operator" readonly>
                    <input type="hidden" value="Success-Based" name="attr_stat_roll_type" readonly>
                    <input type="hidden" value="0" name="attr_stat_roll_power_formula" readonly>
                    <input type="hidden" value="0" name="attr_stat_roll_dice_mod_ready" readonly>
                    <input type="hidden" value="0" name="attr_stat_roll_power_mod_ready" readonly>
                    <input type="hidden" value="&{template:default}" name="attr_stat_roll_template" readonly>
                    <div class="attribute-grid-title-text">ATTRIBUTE ROLLER</div>
                    <div class="modifier-grid">
                        <div class='dice-mod-input'>
                            Dice: <input type="number" placeholder="0" name="attr_stat_roll_dice_mod">
                            <span style="font-family: 'Pictos'">]</span>
                            <span name="attr_stat_roll_dice_mod_ready" class='lbl-mod'></span>
                        </div>
                        <div class='power-mod-input'>
                            Power: <input type="number" placeholder="0" name="attr_stat_roll_power_mod">
                            <span style="font-family: 'Pictos'">]</span>
                            <span name="attr_stat_roll_power_mod_ready" class='lbl-mod'></span>
                        </div>
                    </div>
                    <div class='attribute-grid'>
                        <input class="radio-ability" type="radio" id="radio-ability" name="attr_stat_roller_toggle" value="ability">
                        <label for="radio-ability" class="lbl-radio-ability">
                            <div class='help-text-attb'>
                                <span style="font-family: 'Pictos'">S</span>
                                <span class='tooltip'>Perform an additive attribute check</span>
                            </div>
                        </label>
                        <input class="radio-attack" type="radio" id="radio-attack" name="attr_stat_roller_toggle" value="attack" checked>
                        <label for="radio-attack" class="lbl-radio-attack">
                            <div class='help-text-attb' style="width: 35px">
                                <span style="font-family: 'Pictos'">e</span>
                                <span class='tooltip'>Perform a success-based attribute check</span>
                            </div>
                        </label>
                        <button class="btn-attr attribImpact" type="roll" name="roll_impact-check" value="!statroll --statName Impact --statValue @{impact} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Impact
                            <br /><span name="attr_impact" class='attribNum'></span></button>
                        <input name="attr_impact" type="hidden" value="2">
                        <button class="btn-attr attribResist" type="roll" name="roll_resist-check" value="!statroll --statName Resist --statValue @{resist} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Resist
                            <br /><span name="attr_resist" class='attribNum'></span></button>
                        <input name="attr_resist" type="hidden" value="2">
                        <button class="btn-attr attribEnergy" type="roll" name="roll_energy-check" value="!statroll --statName Energy --statValue @{energy} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Energy
                            <br /><span name="attr_energy" class='attribNum'></span></button>
                        <input name="attr_energy" type="hidden" value="2">
                        <button class="btn-attr attribBrawn" type="roll" name="roll_brawn-check" value="!statroll --statName Brawn --statValue @{brawn} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Brawn
                            <br /><span name="attr_brawn" class='attribNum'></span></button>
                        <input name="attr_brawn" type="hidden" value="2">
                        <button class="btn-attr attribMight" type="roll" name="roll_might-check" value="!statroll --statName Might --statValue @{might} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Might
                            <br /><span name="attr_might" class='attribNum'></span></button>
                        <input name="attr_might" type="hidden" value="4">
                        <button class="btn-attr attribBody" type="roll" name="roll_body-check" value="!statroll --statName Body --statValue @{body} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Body
                            <br /><span name="attr_body" class='attribNum'></span></button>
                        <input name="attr_body" type="hidden" value="4">
                        <button class="btn-attr attribVigor" type="roll" name="roll_vigor-check" value="!statroll --statName Vigor --statValue @{vigor} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Vigor
                            <br /><span name="attr_vigor" class='attribNum'></span></button>
                        <input name="attr_vigor" type="hidden" value="4">
                        <button class="btn-attr attribMagic" type="roll" name="roll_magic-check" value="!statroll --statName Magic --statValue @{magic} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Magic
                            <br /><span name="attr_magic" class='attribNum'></span></button>
                        <input name="attr_magic" type="hidden" value="2">
                        <button class="btn-attr attribWill" type="roll" name="roll_will-check" value="!statroll --statName Will --statValue @{will} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Will
                            <br /><span name="attr_will" class='attribNum'></span></button>
                        <input name="attr_will" type="hidden" value="4">
                        <button class="btn-attr attribEgo" type="roll" name="roll_ego-check" value="!statroll --statName Ego --statValue @{ego} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Ego
                            <br /><span name="attr_ego" class='attribNum'></span></button>
                        <input name="attr_ego" type="hidden" value="4">
                        <button class="btn-attr attribEssence" type="roll" name="roll_essen-check" value="!statroll --statName Essence --statValue @{essence} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Essence
                            <br /><span name="attr_essence" class='attribNum'></span></button>
                        <input name="attr_essence" type="hidden" value="4">
                        <button class="btn-attr attribMastery" type="roll" name="roll_mastery-check" value="!statroll --statName Mastery --statValue @{mastery} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Mastery
                            <br /><span name="attr_mastery" class='attribNum'></span></button>
                        <input name="attr_mastery" type="hidden" value="2">
                        <button class="btn-attr attribTechnique" type="roll" name="roll_tech-check" value="!statroll --statName Technique --statValue @{technique} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Tech
                            <br /><span name="attr_technique" class='attribNum'></span></button>
                        <input name="attr_technique" type="hidden" value="4">
                        <button class="btn-attr attribInstinct" type="roll" name="roll_inst-check" value="!statroll --statName Instinct --statValue @{instinct} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Instinct
                            <br /><span name="attr_instinct" class='attribNum'></span></button>
                        <input name="attr_instinct" type="hidden" value="4">
                        <button class="btn-attr attribFocus" type="roll" name="roll_focus-check" value="!statroll --statName Focus --statValue @{focus} --toggle @{stat_roller_toggle} --tier @{tier_mod} --diceMod @{stat_roll_dice_mod_ready} --powerMod @{stat_roll_power_mod_ready}">Focus
                            <br /><span name="attr_focus" class='attribNum'></span></button>
                        <input name="attr_focus" type="hidden" value="4">
                    </div>
                </div>
                <div class="attack-grid-title">
                    <input type="hidden" value="3d20>8" name="attr_atk_base_dice_roll" readonly>
                    <input type="hidden" value="&{template:attack}" name="attr_atk_roll_template" readonly>
                    <input type="hidden" value="1" name="attr_atk_roll_tier" readonly>
                    <div class="attack-grid-title-text">ATTACK ROLLER</div>
                    <div class="modifier-grid">
                        <div class='dice-mod-input'>
                            Dice: <input type="number" placeholder="0" name="attr_atk_roll_dice_mod">
                            <span style="font-family: 'Pictos'">]</span>
                            <span name="attr_atk_roll_dice_mod_ready" class='lbl-mod'></span>
                        </div>
                        <div class='power-mod-input'>
                            Power: <input type="number" placeholder="0" name="attr_atk_roll_power_mod">
                            <span style="font-family: 'Pictos'">]</span>
                            <span name="attr_atk_roll_power_mod_ready" class='lbl-mod'></span>
                        </div>
                    </div>
                    <div class="action-grid">
                        <button class="btn-attack" type="roll" value="!attack --wpnPower @{eq_wpn_power} --tier @{tier_mod} --diceMod @{atk_roll_dice_mod_ready} --powerMod @{atk_roll_power_mod_ready}" name="roll_wpnAttack"><b>&nbsp;&nbsp;ATTACK WITH<br />EQUIPPED WEAPON</b></button>
                        <button class="btn-charge">[CHARGE ACTION]</button>
                        <button class="btn-defend">[DEFEND ACTION]</button>
                        <button class="btn-steady" type="roll" value="!steady 1'">[STEADY ACTION]</button>
                    </div>
                </div>
            </span>
            <!-- Column Two -->
            <span class="section-tabs">
                <input type='hidden' class='tabstoggle' name='attr_sheetTab' value='buildSheet'>
                <!--**************************BUILD*******************************-->
                <div class="buildSheet">
                  <h1> Character Build </h1>

                  <div class="instructions">
                    <ul>
                      <li>Select two starting traits.</li>
                      <li>Select three roles.</li>
                      <li>During level progression, select a Trait to boost in a Tier section, followed by a Talent.</li>
                      <li><b>TODO</b> Set up reference doc to Roles and Trait Descriptions</li>
                      <li><button type="roll" name="roll_url_strength" class="sheet-hyperlink" value="[Role Description](http://journal.roll20.net/handout/-MZA40aocSpmutToWX9P)">
                          Test Button
                            </button></li>
                    </ul>
                  </div>

                  <div class="base-stat-grid">

                      <span class="base-stat1select">
                          Starting Trait 1<br/>
                          <span class='select-new-arrow'>
                              <select name="attr_start-stat1">
                                  <option value="def" selected="selected">Trait 1</option>
                                  <option value="brawn">Brawn</option>
                                  <option value="magic">Magic</option>
                                  <option value="mastery">Mastery</option>
                              </select></span>
                      </span>
                      <span class="base-stat2select">
                          Starting Trait 2<br/>
                          <span class='select-new-arrow'>
                              <select name="attr_start-stat2">
                                  <option value="def" selected="selected">Trait 2</option>
                                  <option value="impact">Impact</option>
                                  <option value="resist">Resist</option>
                                  <option value="energy">Energy</option>
                              </select></span>
                      </span>
                  </div>
                  <p>
                    <h1>Roles & Traits</h1>
                    <div class='rolegrid'>

                        <!-- Role Selection -->
                        <span class='role1'>
                            <h4>Role 1</h4>
                            <span class='select-new-arrow'>
                              <select name="attr_role1" class="role">
                                    <option value="def" selected="selected">Trait</option>
                                    <option value="blaster">Blaster</option>
                                    <option value="brute">Brute</option>
                                    <option value="defender">Defender</option>
                                    <option value="element">Element</option>
                                    <option value="healer">Healer</option>
                                    <option value="hex">Hex</option>
                                    <option value="kata">Kata</option>
                                    <option value="marksman">Marksman</option>
                                    <option value="proxy">Proxy</option>
                                    <option value="stealth">Stealth</option>
                                    <option value="striker">Striker</option>
                                    <option value="support">Support</option>
                                    <option value="tactician">Tactician</option>
                                    <option value="venom">Venom</option>
                                    <option value="veteran">Veteran</option>
                                    <option value="warden">Warden</option>
                                </select>
                            </span>
                        </span>

                        <span class='role2'>
                            <h4>Role 2</h4>
                            <span class='select-new-arrow'>
                              <select name="attr_role2" class="role">
                                    <option value="def" selected="selected">Trait</option>
                                    <option value="blaster">Blaster</option>
                                    <option value="brute">Brute</option>
                                    <option value="defender">Defender</option>
                                    <option value="element">Element</option>
                                    <option value="healer">Healer</option>
                                    <option value="hex">Hex</option>
                                    <option value="kata">Kata</option>
                                    <option value="marksman">Marksman</option>
                                    <option value="proxy">Proxy</option>
                                    <option value="stealth">Stealth</option>
                                    <option value="striker">Striker</option>
                                    <option value="support">Support</option>
                                    <option value="tactician">Tactician</option>
                                    <option value="venom">Venom</option>
                                    <option value="veteran">Veteran</option>
                                    <option value="warden">Warden</option>
                                </select>
                            </span>
                        </span>

                        <span class='role3'>
                            <h4>Role 3</h4>
                            <span class='select-new-arrow'>
                              <select name="attr_role3" class="role">
                                    <option value="def" selected="selected">Trait</option>
                                    <option value="blaster">Blaster</option>
                                    <option value="brute">Brute</option>
                                    <option value="defender">Defender</option>
                                    <option value="element">Element</option>
                                    <option value="healer">Healer</option>
                                    <option value="hex">Hex</option>
                                    <option value="kata">Kata</option>
                                    <option value="marksman">Marksman</option>
                                    <option value="proxy">Proxy</option>
                                    <option value="stealth">Stealth</option>
                                    <option value="striker">Striker</option>
                                    <option value="support">Support</option>
                                    <option value="tactician">Tactician</option>
                                    <option value="venom">Venom</option>
                                    <option value="veteran">Veteran</option>
                                    <option value="warden">Warden</option>
                                </select>
                              </span>
                        </span>

                        <span class='tier1split'><h4>Tier 1</h4></span>

                        <div class='role1tier1'>

                          <div class='role1tier1grid'>
                              <span class='tier_coretalent'>
                                <div class='help-text-talent'>
                                  <span class='core_talent1_lbl' name="attr_coretalent_role1tier1"></span>
                                  <input type="hidden" name="attr_coretalent_role1tier1" value="Tier 1 Talent Placeholder" readonly>

                                  <span class='tooltip' name='attr_coretalent_role1tier1_tooltip'></span>
                                  <input type='hidden' name='attr_coretalent_role1tier1_tooltip' value='Role 1 Tier 1 Core Talent' readonly>
                                </div>
                              </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role1-trait1" class="role1tier1trait1_sel">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <div class='help-text-talent'>
                                <input type="hidden" name="attr_tier1role1-trait1" class="role1tier1trait1_sel">
                                <span name="attr_tier1role1_talent1" class="role1tiertalent1_lbl"></span>
                                <input type="hidden" name="attr_tier1role1_talent1" value="Placeholder 1" readonly>

                                <span class='tooltip' name='attr_role1tier1talent1_ttip'></span>
                                <input type='hidden' name='attr_role1tier1talent1_ttip' value='Role 1 Tier 1 Talent 1' readonly>
                              </div>

                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role1-trait2" class="role1tier1trait2_sel">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <div class='help-text-talent'>
                                <input type="hidden" name="attr_tier1role1-trait2" class="role1tier1trait2_sel">
                                <span name="attr_tier1role1_talent2" class="role1tiertalent2_lbl"></span>
                                <input type="hidden" name="attr_tier1role1_talent2" value="Placeholder 2" readonly>

                                <span class='tooltip' name='attr_role1tier1talent2_ttip'></span>
                                <input type='hidden' name='attr_role1tier1talent2_ttip' value='Role 1 Tier 1 Talent 2' readonly>
                              </div>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role1-trait3" class="role1tier1trait3_sel">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <div class='help-text-talent'>
                                <input type="hidden" name="attr_tier1role1-trait3" class="role1tier1trait3_sel">
                                <span name="attr_tier1role1_talent3" class="role1tiertalent3_lbl"></span>
                                <input type="hidden" name="attr_tier1role1_talent3" value="Placeholder 3" readonly>

                                <span class='tooltip' name='attr_role1tier1talent3_ttip'></span>
                                <input type='hidden' name='attr_role1tier1talent3_ttip' value='Role 1 Tier 1 Talent 3' readonly>
                              </div>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role1-trait4" class="role1tier1trait4_sel">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <div class='help-text-talent'>
                                <input type="hidden" name="attr_tier1role1-trait4" class="role1tier1trait4_sel">
                                <span name="attr_tier1role1_talent4" class="role1tiertalent4_lbl"></span>
                                <input type="hidden" name="attr_tier1role1_talent4" value="Placeholder 4" readonly>

                                <span class='tooltip' name='attr_role1tier1talent4_ttip'></span>
                                <input type='hidden' name='attr_role1tier1talent4_ttip' value='Role 1 Tier 1 Talent 4' readonly>
                              </div>
                            </span>

                          </div>

                        </div>

                        <div class='role2tier1'>

                          <div class='role2tier1grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent2_lbl' name="attr_role2tier1_coretalent"></span>
                                  <input type="hidden" name="attr_role2tier1_coretalent" value="Tier 1 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role2-trait1" class="role2tier1trait1_sel">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <div class='help-text-talent'>
                                <input type="hidden" name="attr_tier1role2-trait1" class="role2tier1trait1_sel">
                                <span name="attr_tier1role2_talent1" class="role2tier1talent1_lbl"></span>
                                <input type="hidden" name="attr_tier1role2_talent1" value="Placeholder 1" readonly>

                                <span class='tooltip'>Splits points among Domains. Maximum allowed is 3.</span>
                              </div>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role2-trait2" class="role2tier1trait2_sel">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <input type="hidden" name="attr_tier1role2-trait2" class="role2tier1trait2_sel">
                              <span name="attr_tier1role2_talent2" class="role2tier1talent2_lbl"></span>
                              <input type="hidden" name="attr_tier1role2_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role2-trait3" class="role2tier1trait3_sel">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <input type="hidden" name="attr_tier1role2-trait3" class="role2tier1trait3_sel">
                              <span name="attr_tier1role2_talent3" class="role2tier1talent3_lbl"></span>
                              <input type="hidden" name="attr_tier1role2_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role2-trait4" class="role2tier1trait4_sel">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <input type="hidden" name="attr_tier1role2-trait4" class="role2tier1trait4_sel">
                              <span name="attr_tier1role2_talent4" class="role2tier1talent4_lbl"></span>
                              <input type="hidden" name="attr_tier1role2_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <div class='role3tier1'>

                          <div class='role3tier1grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent3_lbl' name="attr_role3tier1_coretalent"></span>
                                  <input type="hidden" name="attr_role3tier1_coretalent" value="Tier 3 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role3-trait1"  class="role3tier1trait1_sel">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                <input type="hidden" name="attr_tier1role3-trait1" class="role3tier1trait1_sel">
                                <span name="attr_tier1role3_talent1" class="role3tier1talent1_lbl"></span>
                                <input type="hidden" name="attr_tier1role3_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role3-trait2" class="role3tier1trait2_sel">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <input type="hidden" name="attr_tier1role3-trait2" class="role3tier1trait2_sel">
                              <span name="attr_tier1role3_talent2" class="role3tier2talent2_lbl"></span>
                              <input type="hidden" name="attr_tier1role3_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role3-trait3" class="role3tier1trait3_sel">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <input type="hidden" name="attr_tier1role3-trait3" class="role3tier1trait3_sel">
                              <span name="attr_tier1role3_talent3" class="role3tier1talent3_lbl"></span>
                              <input type="hidden" name="attr_tier1role3_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier1role3-trait4" class="role3tier1trait4_sel">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                              <input type="hidden" name="attr_tier1role3-trait4" class="role3tier1trait4_sel">
                              <span name="attr_tier1role3_talent4" class="role3tier1talent4_lbl"></span>
                              <input type="hidden" name="attr_tier1role3_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <span class='tier2split'><h4>Tier 2</h4></span>

                        <div class='role1tier2'>

                          <div class='role1tier2grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent_lbl' name="attr_coretalent_role1tier2"></span>
                                  <input type="hidden" name="attr_coretalent_role1tier2" value="Tier 2 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role1-trait1">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role1_talent1">Placeholder 1</span>
                                  <input type="hidden" name="attr_tier2role1_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role1-trait2">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role1_talent2">Placeholder 2</span>
                                  <input type="hidden" name="attr_tier2role1_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role1-trait3">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role1_talent3">Placeholder 3</span>
                                  <input type="hidden" name="attr_tier2role1_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role1-trait4">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role1_talent4">Placeholder 4</span>
                                  <input type="hidden" name="attr_tier2role1_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <div class='role2tier2'>

                          <div class='role2tier2grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent_lbl' name="attr_role2tier2_coretalent"></span>
                                  <input type="hidden" name="attr_role2tier2_coretalent" value="Tier 2 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role2-trait1">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role2_talent1">Placeholder 1</span>
                                  <input type="hidden" name="attr_tier2role2_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role2-trait2">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role2_talent2">Placeholder 2</span>
                                  <input type="hidden" name="attr_tier2role2_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role2-trait3">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role2_talent3">Placeholder 3</span>
                                  <input type="hidden" name="attr_tier2role2_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role2-trait4">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role2_talent4">Placeholder 4</span>
                                  <input type="hidden" name="attr_tier2role2_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <div class='role3tier2'>

                          <div class='role3tier2grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent_lbl' name="attr_role3tier2_coretalent"></span>
                                  <input type="hidden" name="attr_role3tier2_coretalent" value="Tier 2 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role3-trait1">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role3_talent1">Placeholder 1</span>
                                  <input type="hidden" name="attr_tier2role3_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role3-trait2">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role3_talent2">Placeholder 2</span>
                                  <input type="hidden" name="attr_tier2role3_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role3-trait3">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role3_talent3">Placeholder 3</span>
                                  <input type="hidden" name="attr_tier2role3_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier2role3-trait4">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier2role3_talent4">Placeholder 4</span>
                                  <input type="hidden" name="attr_tier2role3_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <span class='tier3split'><h4>Tier 3</h4></span>

                        <div class='role1tier3'>

                          <div class='role1tier3grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent_lbl' name="attr_coretalent_role1tier3"></span>
                                  <input type="hidden" name="attr_coretalent_role1tier3" value="Tier 3 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role1-trait1">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role1_talent1">Placeholder 1</span>
                                  <input type="hidden" name="attr_tier3role1_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role1-trait2">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role1_talent2">Placeholder 2</span>
                                  <input type="hidden" name="attr_tier3role1_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role1-trait3">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role1_talent3">Placeholder 3</span>
                                  <input type="hidden" name="attr_tier3role1_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role1-trait4">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role1_talent4">Placeholder 4</span>
                                  <input type="hidden" name="attr_tier3role1_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <div class='role2tier3'>

                          <div class='role2tier3grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent_lbl' name="attr_coretalent_role2tier3"></span>
                                  <input type="hidden" name="attr_coretalent_role2tier3" value="Tier 3 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role2-trait1">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role2_talent1">Placeholder 1</span>
                                  <input type="hidden" name="attr_tier3role2_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role2-trait2">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role2_talent2">Placeholder 2</span>
                                  <input type="hidden" name="attr_tier3role2_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role2-trait3">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role2_talent3">Placeholder 3</span>
                                  <input type="hidden" name="attr_tier3role2_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role2-trait4">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role2_talent4">Placeholder 4</span>
                                  <input type="hidden" name="attr_tier3role2_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <div class='role3tier3'>

                          <div class='role3tier3grid'>

                            <span class='tier_coretalent'>
                                  <span class='core_talent_lbl' name="attr_coretalent_role3tier3"></span>
                                  <input type="hidden" name="attr_coretalent_role3tier3" value="Tier 3 Talent Placeholder" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role3-trait1">
                                    <option value="def" selected="selected">Trait 1</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role3_talent1">Placeholder 1</span>
                                  <input type="hidden" name="attr_tier3role3_talent1" value="Placeholder 1" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role3-trait2">
                                    <option value="def" selected="selected">Trait 2</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role3_talent2">Placeholder 2</span>
                                  <input type="hidden" name="attr_tier3role3_talent2" value="Placeholder 2" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role3-trait3">
                                    <option value="def" selected="selected">Trait 3</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role3_talent3">Placeholder 3</span>
                                  <input type="hidden" name="attr_tier3role3_talent3" value="Placeholder 3" readonly>
                            </span>

                            <span class='select-new-arrow'>
                              <select name="attr_tier3role3-trait4">
                                    <option value="def" selected="selected">Trait 4</option>
                                    <option value="brawn">Brawn</option>
                                    <option value="magic">Magic</option>
                                    <option value="mastery">Mastery</option>
                                    <option value="impact">Impact</option>
                                    <option value="resist">Resist</option>
                                    <option value="energy">Energy</option>
                                </select>
                            </span>

                            <span style="font-family: 'Pictos'">]</span>

                            <span>
                                  <span name="attr_tier3role3_talent4">Placeholder 4</span>
                                  <input type="hidden" name="attr_tier3role3_talent4" value="Placeholder 4" readonly>
                            </span>

                          </div>

                        </div>

                        <!-- <span class='tier1split'><h4><div class='help-text-tier'>Tier 1<span class='tooltip'>Select a Trait to boost.<br />Talents will be made available after a selection is made.</span></div></h4></span> -->

                    </div>

                </div>
                <!--*************************WEAPONS******************************-->
                <div class="weaponSheet">
                    <h1>Weapons</h1>
                    <fieldset class="repeating_weapons">
                        <div class="new-wpn-grid">
                            <span class="new-wpn-grid-name">
                                <input class="input-wpn-name" type="text" placeholder="Weapon Name" name="attr_wpn_name">
                            </span>
                            <span class="new-wpn-grid-select">
                                <span>
                                    <span class='select-new-arrow'><select class="select-wpn" name="attr_wpn_source">
                                            <option value="def" selected="selected">Source</option>
                                            <option value="might">Might</option>
                                            <option value="will">Will</option>
                                            <option value="technique">Technique</option>
                                        </select></span>
                                </span>
                                <span>
                                    <span class='select-new-arrow'><select class="select-wpn" name="attr_wpn_feature">
                                            <option value="def" selected="selected">Feature</option>
                                            <option value="power">Power</option>
                                            <option value="range">Range</option>
                                            <option value="defender">Defender</option>
                                            <option value="holdout">Holdout</option>
                                            <option value="versatile">Versatile</option>
                                            <option value="heavy">Heavy Arm</option>
                                            <option value="spell">Spell Focus</option>
                                            <option value="snipe">Snipe</option>
                                        </select></span>
                                </span>
                            </span>
                            <span class="new-wpn-grid-notes">
                                <textarea class="txt-wpn-notes" name="attr_wpn_notes" type="text" placeholder="Notes"></textarea>
                            </span>
                            <span class="new-wpn-grid-equip">
                                <button type="action" name="act_equip-weapon">EQUIP</button>
                            </span>
                        </div>
                    </fieldset>
                </div>
                <!--*************************ARMOR********************************-->
                <div class="armorSheet">
                    <h1>Armor</h1>
                    <div class='ar-info-grid'>
                        <span class='ar-info'>Armor affects HP and AP</span>
                        <span class='ar-info-hp'>Max HP = Vigor * Armor</span>
                        <span class='ar-info-ap'>Max AP = <div class='help-text'>Tier<span class='tooltip'>Level Tier is calculated as<br />[(PlayerLevel/8)(Rounded Down) + 1]</span></div> + Armor</span>
                        <span class='ar-col-HP'>HP</span>
                        <span class='ar-col-AP'>AP</span>
                        <span class='ar-info-lgt'>LIGHT</span>
                        <span class='ar-info-med'>MEDIUM</span>
                        <span class='ar-info-hvy'>HEAVY</span>
                        <span class='ar-info-lgt-hp'>*7</span>
                        <span class='ar-info-med-hp'>*10</span>
                        <span class='ar-info-hvy-hp'>*13</span>
                        <span class='ar-info-lgt-ap'>+3</span>
                        <span class='ar-info-med-ap'>+2</span>
                        <span class='ar-info-hvy-ap'>+1</span>
                    </div>
                    <fieldset class="repeating_armor">
                        <div class='new-ar-grid'>
                            <span class="new-ar-grid-name">
                                <input class="input-ar-name" type="text" placeholder="Armor Name" name="attr_ar_name">
                            </span>
                            <span class="new-ar-grid-select">
                                <span class='select-new-arrow'>
                                    <select name="attr_armor_type" class="select-wgt">
                                        <option value="def" selected="selected">Select</option>
                                        <option value="light">Light</option>
                                        <option value="medium">Medium</option>
                                        <option value="heavy">Heavy</option>
                                    </select>
                                </span>
                            </span>
                            <span class="new-ar-grid-notes">
                                <textarea class="txt-ar-notes" name="attr_ar_notes" type="text" placeholder="Notes"></textarea>
                            </span>
                            <span class="new-ar-grid-equip">
                                <button type="action" name="act_equip-armor">EQUIP</button>
                            </span>
                        </div>
                    </fieldset>
                </div>
                <!--*************************SKILLS*******************************-->
                <div class="skillSheet">
                    <h1>Skills</h1>

                    <div class="paradigm-grid">
                        <span>Paradigm</span>
                        <span>Forceful</span>
                        <span>Cunning</span>
                        <span>Inspiring</span>
                        <span>Max Total:
                            <span name='attr_paradigm_max'>3</span>
                            <input type="hidden" name="attr_paradigm_max" readonly>
                        </span>

                        <!-- Forceful Value -->
                        <span>
                            <div class="skill-grid">
                                <span style="font-family: 'Pictos'"><button type="action" name='act_decr-forceful' class='skill-val-button skill-decr-val'>}</button></span>
                                <span name='attr_forceful'>0</span>
                                    <input type='hidden' name='attr_forceful' value='0' readonly>
                                <span style="font-family: 'Pictos'"><button type="action" name='act_incr-forceful' class='skill-val-button skill-incr-val'>{</button></span>
                            </div>
                        </span>

                        <!-- Cunning Value -->
                        <span>
                            <div class="skill-grid">
                                <span style="font-family: 'Pictos'"><button type="action" name='act_decr-cunning' class='skill-val-button skill-decr-val'>}</button></span>
                                <span name='attr_cunning'>0</span>
                                    <input type='hidden' name='attr_cunning' value='0' readonly>
                                <span style="font-family: 'Pictos'"><button type="action" name='act_incr-cunning' class='skill-val-button skill-incr-val'>{</button></span>
                            </div>
                        </span>

                        <!-- Inspiring Value -->
                        <span>
                            <div class="skill-grid">
                                <span style="font-family: 'Pictos'"><button type="action" name='act_decr-inspiring' class='skill-val-button skill-decr-val'>}</button></span>
                                <span name='attr_inspiring'>0</span>
                                    <input type='hidden' name='attr_inspiring' value='0' readonly>
                                <span style="font-family: 'Pictos'"><button type="action" name='act_incr-inspiring' class='skill-val-button skill-incr-val'>{</button></span>
                            </div>
                        </span>
                    </div>

                    <hr/>

                    <div class="domain-grid">
                        <span>
                            <div class='help-text'>Domains
                            <span class='tooltip'>Splits points among Domains. Maximum allowed is 3.</span>
                            </div>
                        </span>
                        <span>Remaining: <span name='attr_domain_available_points'></span>
                            <input type="hidden" name="attr_domain_available_points" value='0' readonly>
                        </span>
                        <span>Forceful</span>
                        <span>Cunning</span>
                        <span>Inspiring</span>

                        <span>Athletics</span>
                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-athletics' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_athletics'>0</span>
                                <input type='hidden' name='attr_athletics' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-athletics' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_athleticsForceful'>0</span>
                            <input type='hidden' name='attr_athleticsForceful' value='0' readonly>
                        <span name='attr_athleticsCunning'>0</span>
                            <input type='hidden' name='attr_athleticsCunning' value='0' readonly>
                        <span name='attr_athleticsInspiring'>0</span>
                            <input type='hidden' name='attr_athleticsInspiring' value='0' readonly>

                        <span>Arcana</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-arcana' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_arcana'>0</span>
                                <input type='hidden' name='attr_arcana' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-arcana' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_arcanaForceful'>0</span>
                            <input type='hidden' name='attr_arcanaForceful' value='0' readonly>
                        <span name='attr_arcanaCunning'>0</span>
                            <input type='hidden' name='attr_arcanaCunning' value='0' readonly>
                        <span name='attr_arcanaInspiring'>0</span>
                            <input type='hidden' name='attr_arcanaInspiring' value='0' readonly>

                        <span>Craft</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-craft' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_craft'>0</span>
                                <input type='hidden' name='attr_craft' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-craft' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_craftForceful'>0</span>
                            <input type='hidden' name='attr_craftForceful' value='0' readonly>
                        <span name='attr_craftCunning'>0</span>
                            <input type='hidden' name='attr_craftCunning' value='0' readonly>
                        <span name='attr_craftInspiring'>0</span>
                            <input type='hidden' name='attr_craftInspiring' value='0' readonly>

                        <span>Culture</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-culture' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_culture'>0</span>
                                <input type='hidden' name='attr_culture' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-culture' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_cultureForceful'>0</span>
                            <input type='hidden' name='attr_cultureForceful' value='0' readonly>
                        <span name='attr_cultureCunning'>0</span>
                            <input type='hidden' name='attr_cultureCunning' value='0' readonly>
                        <span name='attr_cultureInspiring'>0</span>
                            <input type='hidden' name='attr_cultureInspiring' value='0' readonly>

                        <span>Influence</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-influence' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_influence'>0</span>
                                <input type='hidden' name='attr_influence' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-influence' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_influenceForceful'>0</span>
                            <input type='hidden' name='attr_influenceForceful' value='0' readonly>
                        <span name='attr_influenceCunning'>0</span>
                            <input type='hidden' name='attr_influenceCunning' value='0' readonly>
                        <span name='attr_influenceInspiring'>0</span>
                            <input type='hidden' name='attr_influenceInspiring' value='0' readonly>

                        <span>Science</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-science' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_science'>0</span>
                                <input type='hidden' name='attr_science' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-science' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_scienceForceful'>0</span>
                            <input type='hidden' name='attr_scienceForceful' value='0' readonly>
                        <span name='attr_scienceCunning'>0</span>
                            <input type='hidden' name='attr_scienceCunning' value='0' readonly>
                        <span name='attr_scienceInspiring'>0</span>
                            <input type='hidden' name='attr_scienceInspiring' value='0' readonly>

                        <span>Skulduggery</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-skulduggery' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_skulduggery'>0</span>
                                <input type='hidden' name='attr_skulduggery' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-skulduggery' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_skulduggeryForceful'>0</span>
                            <input type='hidden' name='attr_skulduggeryForceful' value='0' readonly>
                        <span name='attr_skulduggeryCunning'>0</span>
                            <input type='hidden' name='attr_skulduggeryCunning' value='0' readonly>
                        <span name='attr_skulduggeryInspiring'>0</span>
                            <input type='hidden' name='attr_skulduggeryInspiring' value='0' readonly>

                        <span>Survival</span>

                        <div class="skill-grid">
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_decr-survival' class='skill-val-button skill-decr-val'>}</button>
                            </span>
                            <span name='attr_survival'>0</span>
                                <input type='hidden' name='attr_survival' value='0' readonly>
                            <span style="font-family: 'Pictos'">
                              <button type="action" name='act_incr-survival' class='skill-val-button skill-incr-val'>{</button>
                              </span>
                        </div>

                        <span name='attr_survivalForceful'>0</span>
                            <input type='hidden' name='attr_survivalForceful' value='0' readonly>
                        <span name='attr_survivalCunning'>0</span>
                            <input type='hidden' name='attr_survivalCunning' value='0' readonly>
                        <span name='attr_survivalInspiring'>0</span>
                            <input type='hidden' name='attr_survivalInspiring' value='0' readonly>

                    </div>
                </div>
                <!--*************************INVENTORY****************************-->
                <div class="inventorySheet">
                    <h1>Inventory Coming Soon</h1>
                </div>
            </span>
        </div>
    </span>
</span>

<rolltemplate class="sheet-rolltemplate-attack">
    <div class="sheet-outer-container">
    <div class="sheet-box-outer"><div class="sheet-box-middle"><div class="sheet-box-inner">
    <div class="sheet-template-container-attack">
        <div class="sheet-template-title">{{name}}</div>
        <div class="sheet-template-baseDice">Dice Rolled: {{base}} </div>
        <div class="sheet-template-diceMod">Dice Mod: {{diceMod}} </div>
        <div class="sheet-template-power">Weapon Power: {{wpnPower}} </div>
        <div class="sheet-template-powerMod">Power Mod: {{powerMod}} </div>
        <div class="sheet-template-tier">Tier: {{levelTier}} </div>
        <div class="sheet-template-result">Result: {{result}}</div>
    </div>
    </div></div></div>
    </div>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-stat">
    <div class="sheet-outer-container">
    <div class="sheet-box-outer"><div class="sheet-box-middle"><div class="sheet-box-inner">
    <div class="sheet-template-container-stat">
        <div class="sheet-template-title">{{name}} - {{statName}}</div>
        <div class="sheet-template-baseDice">Dice Rolled: {{base}} </div>
        <div class="sheet-template-diceMod">Dice Mod: {{diceMod}} </div>
        <div class="sheet-template-power">{{statName}} Value: {{statValue}} </div>
        <div class="sheet-template-powerMod">Power Mod: {{powerMod}} </div>
        <div class="sheet-template-tier">Tier: {{levelTier}} </div>
        <div class="sheet-template-result">Result: {{result}}</div>
    </div>
    </div></div></div>
    </div>
</rolltemplate>

<!--*******************************SHEETWORKERS*************************************-->
<script type="text/worker">
    /* ---------------------------- Page Toggle --------------------------------*/

    const button_list = ["inventorySheet", "buildSheet", "weaponSheet", "armorSheet", "skillSheet"];

    //Page Toggle
    button_list.forEach(button => {
       on('clicked:'+[button], function(){
          setAttrs({
                sheetTab: button
            });
       });
    });

    /* ----------------------------- Tier Logic --------------------------------*/

    const role_selects = ["role1", "role2", "role3"];

    const role1_traits = [
        "tier1role1-trait1", "tier1role1-trait2", "tier1role1-trait3", "tier1role1-trait4",
        "tier2role1-trait1", "tier2role1-trait2", "tier2role1-trait3", "tier2role1-trait4",
        "tier3role1-trait1", "tier3role1-trait2", "tier3role1-trait3", "tier3role1-trait4"];

    const role1_talents = [
        "coretalent_role1tier1","tier1role1_talent1", "tier1role1_talent2", "tier1role1_talent3", "tier1role1_talent4",
        "coretalent_role1tier2","tier2role1_talent1", "tier2role1_talent2", "tier2role1_talent3", "tier2role1_talent4",
        "coretalent_role1tier3","tier3role1_talent1", "tier3role1_talent2", "tier3role1_talent3", "tier3role1_talent4"];

    const role1_tooltips = [
        "coretalent_role1tier1_tooltip","role1tier1talent1_ttip","role1tier1talent2_ttip","role1tier1talent3_ttip","role1tier1talent4_ttip"];

    const role2_traits = [
        "tier1role2-trait1", "tier1role2-trait2", "tier1role2-trait3", "tier1role2-trait4",
        "tier2role2-trait1", "tier2role2-trait2", "tier2role2-trait3", "tier2role2-trait4",
        "tier3role2-trait1", "tier3role2-trait2", "tier3role2-trait3", "tier3role2-trait4"];

    const role2_talents = [
        "role2tier1_coretalent","tier1role2_talent1", "tier1role2_talent2", "tier1role2_talent3", "tier1role2_talent4",
        "role2tier2_coretalent","tier2role2_talent1", "tier2role2_talent2", "tier2role2_talent3", "tier2role2_talent4",
        "coretalent_role2tier3","tier3role2_talent1", "tier3role2_talent2", "tier3role2_talent3", "tier3role2_talent4"];

    const role3_traits = [
        "tier1role3-trait1", "tier1role3-trait2", "tier1role3-trait3", "tier1role3-trait4",
        "tier2role3-trait1", "tier2role3-trait2", "tier2role3-trait3", "tier2role3-trait4",
        "tier3role3-trait1", "tier3role3-trait2", "tier3role3-trait3", "tier3role3-trait4"];

    const role3_talents = [
        "role3tier1_coretalent","tier1role3_talent1", "tier1role3_talent2", "tier1role3_talent3", "tier1role3_talent4",
        "role3tier2_coretalent","tier2role3_talent1", "tier2role3_talent2", "tier2role3_talent3", "tier2role3_talent4",
        "coretalent_role3tier3","tier3role3_talent1", "tier3role3_talent2", "tier3role3_talent3", "tier3role3_talent4"];

    const talent_swap_list = [
      "default", "blaster", "brute", "defender", "element",
      "healer", "hex", "kata", "marksman", "proxy",
      "stealth", "striker", "support", "tactician",
      "venom", "veteran", "warden"];

    role_selects.forEach(role => {
      on('change:'+[role], function(eventInfo){
        console.log("Change Detected on " + role + ". Resetting Traits and Talents for that tier.");

        var selectedRole = eventInfo.newValue;
        var traits = getRoleTraits(role);
        var talents = getRoleTalents(role);
        var tooltips = getRoleTooltips(role);

        resetTraits(traits);
        resetTalents(selectedRole, talents);
        resetTooltips(selectedRole, tooltips);
      });
    });

    role1_traits.forEach(trait => {
      on('change:'+[trait], function(eventInfo){
        var traitNum = trait[trait.length-1];
        var oldTrait = eventInfo.previousValue;
        var newTrait = eventInfo.newValue;
        console.log("Trait " + traitNum + " on Role 1 changed.");
        console.log("Old Trait: " + oldTrait + " | New Trait: " + newTrait);

        updateLevel(oldTrait, newTrait);
        updateAttributes(oldTrait, newTrait);
      });
    });

    function getRoleTraits(role){
      var traits;
      switch(true){
              case role === "role1":  traits = role1_traits; break;
              case role === "role2":  traits = role2_traits; break;
              case role === "role3":  traits = role3_traits; break;
          }

      return traits;
    }

    function getRoleTalents(role){
      var talents;
      switch(true){
              case role === "role1":  talents = role1_talents; break;
              case role === "role2":  talents = role2_talents; break;
              case role === "role3":  talents = role3_talents; break;
          }

      return talents;
    }

    function getRoleTooltips(role){
      var tooltips;
      switch(true){
              case role === "role1":  tooltips = role1_tooltips; break;
              case role === "role2":  tooltips = role2_tooltips; break;
              case role === "role3":  tooltips = role3_tooltips; break;
          }

      return tooltips;
    }

    function resetTraits(traits){
      console.log("Resetting traits...");

      traits.forEach(function(trait){
        setAttrs({[trait]:'def'});
      });
    };

    function resetTalents(selectedRole, talents){
      console.log("Resetting talents for " + selectedRole + "...");

      //Retrieve the pool of talents based on the chosen role
      var newTalents = eval("talents_" + selectedRole);

      //Write the values based on the chosen role
      var i = 0;
      talents.forEach(function(talent){
        console.log("Writing onto: " + [talent]);
        console.log("Writing with: " + newTalents[i]);
        setAttrs({[talent]:newTalents[i]});
        i++;
      });
    };

    function resetTooltips(selectedRole, tooltips){
      console.log("Resetting tooltips for " + selectedRole + "...");

      //Retrieve the pool of tooltips based on the chosen role
      var newTooltips = eval("tooltips_" + selectedRole);

      //Write the values based on the chosen role
      var i = 0;
      tooltips.forEach(function(tooltip){
        console.log("Writing onto: " + [tooltip]);
        console.log("Writing with: " + tooltips[i]);
        setAttrs({[tooltip]:newTooltips[i]});
        i++;
      });
    };

    on("change:start-stat1 change:start-stat2", function(eventInfo){
        var oldValue = eventInfo.previousValue;
        var newValue = eventInfo.newValue;

        console.log("Start Stat Changed! Old: " + oldValue + " | New: " + newValue);
        console.log("TODO: Method is breaking after this point. FIX IT!");

        updateAttributes(oldValue, newValue);

        getAttrs(["start-stat1", "start-stat2"], function(values){

            var trait1 = "None";
            switch(values["start-stat1"]){
                    case "brawn":     trait1 = "Brawn";    break;
                    case "magic":     trait1 = "Magic";    break;
                    case "mastery":   trait1 = "Mastery";  break;
                };

            var trait2 = "None";
            switch(values["start-stat2"]){
                    case "impact":    trait2 = "Impact";  break;
                    case "resist":    trait2 = "Resist";  break;
                    case "energy":    trait2 = "Energy";  break;
                };

            setAttrs({
                startbonus1 : trait1,
                startbonus2 : trait2
            });
        });
    });
/*
    //Tier 1 Tally (TODO: Implement into new update logic)
    on(tier1_trait_changes.join(" "), function(eventInfo){
        var oldTrait = eventInfo.previousValue;
        var newTrait = eventInfo.newValue;

        updateLevel(oldTrait, newTrait);
        updateAttributes(oldTrait, newTrait);
    });

    //Tier 2 Tally
    on(tier2_trait_changes.join(" "), function(eventInfo){
        var oldTrait = eventInfo.previousValue;
        var newTrait = eventInfo.newValue;

        updateLevel(oldTrait, newTrait);
        updateAttributes(oldTrait, newTrait);
    });

    //Tier 3 Tally
    on(tier3_trait_changes.join(" "), function(eventInfo){
        var oldTrait = eventInfo.previousValue;
        var newTrait = eventInfo.newValue;

        updateLevel(oldTrait, newTrait);
        updateAttributes(oldTrait, newTrait);
    }); */

/* ------------------------------------- Talent Swapping ------------------------------------*/

  const talents_blaster = [
    "Arcane Sling",   "Stun",           "Wild Missles",   "Deflecting Shot", "Anchored Magic",
    "Arcane Burst",   "Arcane Barrage",   "Arcane Sweep", "Explosive Force",    "Exhilirating Display",
    "Arcane Mortar",  "Arcane Javelin",	"Empower Spell",	"Blast Away",	     "Aether Conversion"];

  const talents_brute = [
    "Mighty Blow",  "Staggering Blow",  "Launch",     "Brutal Impact",    "Shrug Off",
    "Overpower",    "Break Armor",      "Shockwave",  "Monstrous March",  "Juggernaut",
    "Mutilate",     "TBA",              "TBA",        "TBA",              "TBA"];

  const talents_defender = [
    "Intervene",          "Steadfast Guard",  "Bouncer",        "Stone Strike", "Shield Block",
    "Threatening Strike", "Assume Spell",     "Charging Guard", "Strikeback",   "Armor Mastery",
    "Lifewall",           "TBA",              "TBA",            "TBA",          "TBA"];

  const talents_element = [
    "First Pact",       "Elemental Authority",  "Elemental Pact",   "Elemental Bond",   "Favored Element",
    "Telling Strike",   "Dampen Element",       "Shift Technique",  "Elemental Union",  "Alignment",
    "Inflict Weakness", "Reflect Element",      "Absorb Element",   "Magnification",    "Innate Shift"];

  const talents_healer = [
    "Battle Heal",    "Cure Circle",    "Healing Mist", "Rapid Heal",       "Regenerate",
    "Purify",         "Healing Bond",   "Mend Wounds",  "Support Recovery", "Healing Spike",
    "Healing Light",  "Healing Field",  "Link Shift",   "Heartsync",        "Life Overflowing"];

  const talents_hex = [
    "Sap",              "Heartache",      "Gloom",            "Impotence",  "Cursed Edge",
    "Wail of Despair",  "Effigy Needle",  "Shade Labyrinth",  "Malice",     "Spite",
    "Corruption",       "Forsaken Arts",  "Shattermind",      "Millstone",  "Lifesever"];

  const talents_kata = [
    "Patient Form",     "Inner Grace",        "Simplicity",       "Steady Stance",    "Empty Mind",
    "Centering Breath", "Flow Moves Body",    "Shifting Stance",  "Invincible Mien",  "Mind As Body",
    "Union",            "Mantra of Purpose",  "Mantra of Energy", "Draw the Well",    "Enlightened Rest"];

  const talents_marksman = [
    "Aim",    "Leg Aim",    "Long Shot",        "Arrow Guard",      "Retreating Step",
    "Volley", "Cover Fire", "Perfect Distance", "Retreating Shot",  "Single Out",
    "TBA",    "TBA",        "TBA",              "TBA",              "TBA"];

  const talents_proxy = [
    "Summon Proxy",         "Mobile Proxy",     "Distant Proxy",      "Long Range Proxy", "Proxy Tactics",
    "Imbued Proxy",         "Elemental Proxy",  "Proxy Shielding",    "Vital Proxy",      "Controlling Proxy",
    "Robust Modifications", "Overcharge",       "Destructive Burst",  "Imbued Battery",   "Rapidfire Proxy"];

  const talents_stealth = [
    "Hide",       "Slip",           "Blood and Smoke",  "Sneak Attack",   "In Plain Sight",
    "Ambush",     "Vanishing Bite", "Pain Muffler",     "Soothing Quiet", "Opportunity Attack",
    "Shadowstep", "Blindside",      "TBA",              "TBA",            "TBA"];

  const talents_striker = [
    "Power Attack",   "Parry",              "Overextend",     "Agile Assault",      "Close Quarters Offense",
    "Multi-Attack",   "Unbalancing Attack", "Counter Attack", "Sure Strike",        "Power Expertise",
    "Flurry Strike",  "Thrill of Battle",   "Crowd Breaker",  "Staggered Advance",  "Assault Chain"];

  const talents_support = [
    "Gift of Bravery",  "Gift of Swiftness",  "Gift of Power",  "Skald's Gift",     "Heart of the Party",
    "Gift of Haste",    "Gift of Brawn",      "Gift of Magic",  "Gift of Mastery",  "Gift of Inspiration",
    "Convert",          "Weapon++",           "Spell++",        "TBA",              "Empowering Circle"];

  const talents_tactician = [
    "Priority Target",  "Tactical Orders",  "Active Command", "Evasive Action",     "Follow the Leader",
    "Diversion",        "Expose",           "Scatter!",       "Command Position",   "Combat Awareness",
    "Leading Attack",   "Bunker Down",      "Killing Floor",  "Training Ground",    "Rally Point"];

  const talents_venom = [
    "Toxic Infusion",   "Burning Infusion",   "Chilling Infusion",    "Psychic Infusion",   "Bleeding Infusion",
    "Mist Spray",       "Overdose",           "Counter Dose",         "Poison Pin",         "Extreme Alchemy",
    "TBA",              "TBA",                "TBA",                  "Mithridatism",       "Lingering Venom"];

  const talents_veteran = [
    "Stability",        "Expert Guard",           "Expert Strike",      "Expert Defense",     "Watchful Defense",
    "Second Wind",      "Battlefield Expertise",  "Strike Advantage",   "Guarded Defenses",   "Quick Draw",
    "Standing Ground",  "TBA",                    "TBA",                "Armor Mobility",     "Rugged"];

  const talents_warden = [
    "Fortify",            "Protection",         "Bolster",        "Deflect",          "Anticipation",
    "Force Sanctuary",    "Status Lock",        "Ego Fortress",   "Isolation",        "Hostile Territory",
    "Heart Guard",        "Antimagic Field",    "Chaff",          "Defense Field",    "Stasis Field"];

/* ----------------------------------- Tooltip Swapping --------------------------------------*/

const tooltips_blaster = [
  "Blaster Tier 1 Core Talent",
  "Blaster Tier 1 Talent 1",
  "Blaster Tier 1 Talent 2",
  "Blaster Tier 1 Talent 3",
  "Blaster Tier 1 Talent 4",
  "Blaster Tier 2 Core Talent",
  "Blaster Tier 2 Talent 1",
  "Blaster Tier 2 Talent 2",
  "Blaster Tier 2 Talent 3",
  "Blaster Tier 2 Talent 4",
  "Blaster Tier 3 Core Talent",
  "Blaster Tier 3 Talent 1",
  "Blaster Tier 3 Talent 2",
  "Blaster Tier 3 Talent 3",
  "Blaster Tier 3 Talent 4"];

  const tooltips_brute = [
    "Brute Tier 1 Core Talent",
    "Brute Tier 1 Talent 1",
    "Brute Tier 1 Talent 2",
    "Brute Tier 1 Talent 3",
    "Brute Tier 1 Talent 4",
    "Brute Tier 2 Core Talent",
    "Brute Tier 2 Talent 1",
    "Brute Tier 2 Talent 2",
    "Brute Tier 2 Talent 3",
    "Brute Tier 2 Talent 4",
    "Brute Tier 3 Core Talent",
    "Brute Tier 3 Talent 1",
    "Brute Tier 3 Talent 2",
    "Brute Tier 3 Talent 3",
    "Brute Tier 3 Talent 4"];

/* ------------------------------------- Logic Variables ------------------------------------*/

    const attributes = [
        "brawn",  "magic",      "mastery",    "impact",     "resist",
        "energy", "might",      "body",       "vigor",      "will",
        "ego",    "essence",    "technique",  "instinct",   "focus",
        "hp", "mp", "ap", "hp_max","mp_max", "ap_max",
        "wpn_range", "wpn_block", "wpn_power",
        "armorhp_mod",  "armorap_mod",  "tier_mod",
        "player_level",         "player_level_mod",
        "atk_roll_dice_mod",    "atk_roll_dice_mod_ready",
        "atk_roll_power_mod",   "atk_roll_power_mod_ready",
        "stat_roll_power_mod",  "stat_roll_power_mod_ready",
        "forceful",   "cunning",    "inspiring",
        "athletics",  "arcana",   "craft",       "culture",
        "influence",  "science",  "skulduggery", "survival",
        "athleticsForceful",   "athleticsCunning",    "athleticsInspiring",
        "arcanaForceful",      "arcanaCunning",       "arcanaInspiring",
        "craftForceful",       "craftCunning",        "craftInspiring",
        "cultureForceful",     "cultureCunning",      "cultureInspiring",
        "influenceForceful",   "influenceCunning",    "influenceInspiring",
        "scienceForceful",     "scienceCunning",      "scienceInspiring",
        "skulduggeryForceful", "skulduggeryCunning",  "skulduggeryInspiring",
        "survivalForceful",    "survivalCunning",     "survivalInspiring"];

    var attribute_totals = {
        "brawn" :0, "magic"  :0, "mastery"  :0, "impact"  :0, "resist":0,
        "energy":0, "might"  :0, "body"     :0, "vigor"   :0, "will"  :0,
        "ego"   :0, "essence":0, "technique":0, "instinct":0, "focus" :0,
        "hp" :0, "mp" :0, "ap" :0, "hp_max" :0, "mp_max" :0, "ap_max" :0,
        "wpn_range"   :0, "wpn_block"   :0, "wpn_power"   :0,
        "armorhp_mod" :0, "armorap_mod" :0, "tier_mod"    :0,
        "player_level"        :0, "player_level_mod"          :0,
        "atk_roll_dice_mod"   :0, "atk_roll_dice_mod_ready"   :0,
        "atk_roll_power_mod"  :0, "atk_roll_power_mod_ready"  :0,
        "stat_roll_power_mod" :0, "stat_roll_power_mod_ready" :0,
        "forceful"  :0, "cunning" :0, "inspiring"   :0,
        "athletics" :0, "arcana"  :0, "craft"       :0, "culture"  :0,
        "influence" :0, "science" :0, "skulduggery" :0, "survival" :0,
        "athleticsForceful":0, "athleticsCunning":0, "athleticsInspiring":0,
        "arcanaForceful"   :0, "arcanaCunning"   :0, "arcanaInspiring"   :0,
        "craftForceful"    :0, "craftCunning"    :0, "craftInspiring"    :0,
        "cultureForceful"  :0, "cultureCunning"  :0, "cultureInspiring"  :0,
        "influenceForceful":0, "influenceCunning":0, "influenceInspiring":0,
        "scienceForceful"  :0, "scienceCunning"  :0, "scienceInspiring"  :0,
        "skulduggeryForceful" :0, "skulduggeryCunning" :0,
        "skulduggeryInspiring" :0,
        "survivalForceful" :0, "survivalCunning" :0, "survivalInspiring" :0};

    const currentPoints = ["hp", "mp", "ap"];
    const maxPoints = ["hp_max", "mp_max", "ap_max"];

    var equippedWeapon={
        source: "",
        feature: ""
    };

    var equippedArmorWgt = "none";

    const wpnFeatBonus={
        power:      {bonus: 1,  range: 0,   block: 0,  dice_mod: 0},
        range:      {bonus: 0,  range: 2,   block: 0,  dice_mod: 0},
        defender:   {bonus: 0,  range: 0,   block: 4,  dice_mod: 0},
        holdout:    {bonus: 0,  range: 1,   block: 2,  dice_mod: 0},
        versatile:  {bonus: 0,  range: 1,   block: 0,  dice_mod: 0},
        heavy:      {bonus: 3,  range: 0,   block: 0,  dice_mod: -1},
        spell:      {bonus: 1,  range: 2,   block: 0,  dice_mod: 0},
        snipe:      {bonus: 1,  range: 3,   block: 0,  dice_mod: -1}
    };

    //Read Attributes on Page Load
    on('sheet:opened', function(){

        attributes.forEach(function(attr){

            getAttrs([attr], function(values){

                console.log("Checking attribute " + attr);

                const parsed = parseInt(values[attr]);

                attribute_totals[attr] = isNaN(parsed) ? 0 : parsed;

                console.log("Found " + attribute_totals[attr]);
                //Set Attributes back (get written as Ints?)
                setAttrs({
                   [attr] : attribute_totals[attr]
                });

            });

        });


        getAttrs(["eq_wpn_source", "eq_wpn_feature", "eq_wpn_type"], function(values){
            var source = values["eq_wpn_source"].toLowerCase();
            var feature = values["eq_wpn_feature"].toLowerCase();
            console.log("Reading Equipped Values...");
            console.log("Source: " + source);
            console.log("Feature: " + feature);
            equippedWeapon.source = source;
            equippedWeapon.feature = feature;
        });

        getAttrs(["creationDone"], function(values){
            var parsed = parseInt(values["creationDone"]);
            if (isNaN(parsed)){
              console.log("Running First Time Calculations...");
              equippedArmorWgt = "light";
              updateOtherAttributes();
              calculatePointTotals();
              calculateWeaponBonuses();
              calculateArmorBonuses();

              updateAllAttributeTotals();

              setAttrs({
                "creationDone" : 1
              });
            };
        });
    });

    /* -------------------------- Gear Management ------------------------------------*/
    on("change:repeating_weapons", function (e) { console.log("Adding Weapon"); });
    on("change:repeating_armor", function (e) { console.log("Adding Armor"); });

    on("remove:repeating_weapons", function (e) { console.log("Weapon Removed");});
    on("remove:repeating_armor", function (e) { console.log("Armor Removed");});

    on("clicked:repeating_weapons:equip-weapon", function(){

        getAttrs(["repeating_weapons_wpn_name", "repeating_weapons_wpn_source", "repeating_weapons_wpn_feature"], function(values){

            var wpnName = values["repeating_weapons_wpn_name"];
            var wpnSource = values["repeating_weapons_wpn_source"];
            var wpnFeature = values["repeating_weapons_wpn_feature"];

            //Do nothing if either dropdown is default
            if(wpnSource != "def" && wpnFeature != "def" && wpnName.length != 0){
                equippedWeapon.source = wpnSource;
                equippedWeapon.feature = wpnFeature;

                console.log("Equipped Weapon Changed: ");
                console.log("Name: " + wpnName);
                console.log("Source: " + equippedWeapon.source);
                console.log("Feature: " + equippedWeapon.feature);

                calculateWeaponBonuses();

                setAttrs({
                    eq_wpn_name: wpnName,
                    eq_wpn_source: capitalizeWord(wpnSource),
                    eq_wpn_feature: capitalizeWord(wpnFeature),
                    eq_wpn_range: attribute_totals["wpn_range"],
                    eq_wpn_block: attribute_totals["wpn_block"],
                    eq_wpn_power: attribute_totals["wpn_power"]
                });
            };
        });
    });

    on("clicked:repeating_armor:equip-armor", function(){

        getAttrs(["repeating_armor_ar_name", "repeating_armor_armor_type"], function(values){

            var arName = values["repeating_armor_ar_name"];
            var arWeight = values["repeating_armor_armor_type"];

            //Do nothing if no type was selected or name is null
            if(arWeight != "def" && arName.length != 0){

                console.log("Equipped Armor Changed: ");
                console.log("Name: " + arName);
                console.log("Weight: " + arWeight);

                equippedArmorWgt = arWeight;

                calculateArmorBonuses();
                updateAllAttributeTotals();

                setAttrs({
                    eq_ar_name: arName,
                    eq_ar_weight: arWeight
                });
            };
        });
    });


    /* -------------------- Level/Attribute Management ----------------------*/

    function updateLevel(oldTrait, newTrait){
      console.log("-----------------Updating Level--------------------");
      console.log("Old Trait: " + oldTrait);
      console.log("New Trait: " + newTrait);
        if (newTrait == "def") {
            attribute_totals["player_level"] > 0 ? attribute_totals["player_level"] -= 1 : attribute_totals["player_level"];
        } else if (oldTrait == "def" || (oldTrait === newTrait)){
            attribute_totals["player_level"] += 1;
        }

        setAttrs({
          player_level  : attribute_totals["player_level"]
        });

        calculatePlayerLevelMod();
        calculateTierMod();
        console.log("----------------Done------------------------------");
    }

    function updateAttributes(oldTrait, newTrait){

        if(oldTrait != "def" && oldTrait != newTrait){
            console.log("-----------------Changing Old Trait--------------------");
            console.log("Trait: " + oldTrait);
            console.log("TODO: Code Breaks Here?");
            console.log("Current Value: " + attribute_totals[oldTrait]);
            attribute_totals[oldTrait] > 2 ? attribute_totals[oldTrait] -= 1 : attribute_totals[oldTrait];
            console.log("New Value: " + attribute_totals[oldTrait]);
            console.log("--------------------------------------------------------");
        }

        if (newTrait != "def" || oldTrait === newTrait) {
            console.log("-----------------Changing New Trait--------------------");
            console.log("Trait: " + newTrait);
            console.log("Current Value: " + attribute_totals[newTrait]);
            attribute_totals[newTrait] += 1;
            console.log("New Value: " + attribute_totals[newTrait]);
            console.log("--------------------------------------------------------");
        }


        updateOtherAttributes();
        calculatePointTotals();
        calculateWeaponBonuses();
        calculateArmorBonuses();

        updateAllAttributeTotals();
    }

    function updateOtherAttributes(){
        attribute_totals["might"]       =   attribute_totals["brawn"]   +   attribute_totals["impact"];
        attribute_totals["body"]        =   attribute_totals["brawn"]   +   attribute_totals["resist"];
        attribute_totals["vigor"]       =   attribute_totals["brawn"]   +   attribute_totals["energy"];
        attribute_totals["will"]        =   attribute_totals["magic"]   +   attribute_totals["impact"];
        attribute_totals["ego"]         =   attribute_totals["magic"]   +   attribute_totals["resist"];
        attribute_totals["essence"]     =   attribute_totals["magic"]   +   attribute_totals["energy"];
        attribute_totals["technique"]   =   attribute_totals["mastery"] +   attribute_totals["impact"];
        attribute_totals["instinct"]    =   attribute_totals["mastery"] +   attribute_totals["resist"];
        attribute_totals["focus"]       =   attribute_totals["mastery"] +   attribute_totals["energy"];
    };

    function updateAllAttributeTotals(){
        attributes.forEach(function(attr){
            setAttrs({
                   [attr] : attribute_totals[attr]
            });
        });
    }

    /* ------------------ Roller Modifier Logic ----------------------------*/

    on("change:stat_roller_toggle", function(){
        console.log("Radio Button Change");
        getAttrs(["stat_roller_toggle", "stat_roll_dice_mod_ready"], function(values){
            calculateStatRoll(values.stat_roll_dice_mod_ready, values.stat_roller_toggle);
        });
    });

    //Verify Stat Roll modifier inputs
    on("change:stat_roll_dice_mod change:stat_roll_power_mod", function(){
        getAttrs(["stat_roll_dice_mod", "stat_roll_power_mod", "stat_roller_toggle"], function(values){
            console.log("--------------------------------");
            console.log("Stat Dice Mod Change Detected");

            var dice_mod = parseInt(values["stat_roll_dice_mod"]) || 0;
            var power_mod = parseInt(values["stat_roll_power_mod"]) || 0;
            var toggle = values["stat_roller_toggle"];

            console.log("Dice Mod: " + dice_mod);
            console.log("Stat Mod: " + power_mod);

            calculateStatRoll(dice_mod, toggle);

            setAttrs({
                stat_roll_dice_mod_ready : dice_mod,
                stat_roll_power_mod_ready : power_mod
            });
        });
    });

    //Verify Attack Roll modifier inputs
    on("change:atk_roll_dice_mod change:atk_roll_power_mod", function(){
        getAttrs(["atk_roll_dice_mod", "atk_roll_power_mod"], function(values){
            console.log("--------------------------------");
            console.log("Attack Dice Mod Change Detected");

            var dice_mod = parseInt(values.atk_roll_dice_mod) || 0;
            var power_mod = parseInt(values.atk_roll_power_mod) || 0;

            console.log("Dice Mod: " + dice_mod);
            console.log("Stat Mod: " + power_mod);

            calculateAttackBaseRoll(dice_mod);

            setAttrs({
                atk_roll_dice_mod_ready : dice_mod,
                atk_roll_power_mod_ready : power_mod
            });
        });
    });

    /* ------------------ Formula Calculations ---------------------------*/

    function calculateArmorBonuses(){
        var hp_mod = 0;
        var ap_mod = 0;
        console.log("Reading Weight: " + equippedArmorWgt);
        switch(equippedArmorWgt){
             case "none":   hp_mod = 1;     ap_mod = 0; break;
             case "light":  hp_mod = 7;     ap_mod = 3; break;
             case "medium": hp_mod = 10;    ap_mod = 2; break;
             case "heavy":  hp_mod = 13;    ap_mod = 1; break;
           };

        console.log("HP: " + hp_mod);
        console.log("AP: " + ap_mod);

        attribute_totals["armorhp_mod"] = hp_mod;
        attribute_totals["armorap_mod"] = ap_mod;

        calculatePointTotals();

           setAttrs({
               armorhp_mod : hp_mod,
               armorap_mod : ap_mod
           });
    }

    function calculateWeaponBonuses(){
        if(!["none", "def"].includes(equippedWeapon.source) && !["none", "def"].includes(equippedWeapon.feature)){

            var bonus = equippedWeapon.source == "might" ?
                                            1 + wpnFeatBonus[equippedWeapon.feature].bonus:
                                            wpnFeatBonus[equippedWeapon.feature].bonus;

            console.log("Weapon Bonus: " + bonus);
            attribute_totals["wpn_range"] = 1 + wpnFeatBonus[equippedWeapon.feature].range;

            attribute_totals["wpn_block"] = wpnFeatBonus[equippedWeapon.feature].block * attribute_totals["tier_mod"];

            attribute_totals["wpn_power"] = attribute_totals[equippedWeapon.source] +
                                        (attribute_totals["tier_mod"] * bonus);

            getAttrs(["stat_roll_dice_mod_ready"], function(values){
                calculateAttackBaseRoll(values["stat_roll_dice_mod_ready"]);
            });
        }
    };

    /* --------------- Recalculate Base Rolls -------------------------- */

    function calculateAttackBaseRoll(playerModDie){
        var base_attack;
        console.log("--------------Recalculating Attack Roll----------------");
        var diceMod = wpnFeatBonus[equippedWeapon.feature].dice_mod + playerModDie;

        console.log("Dice Mod: " + diceMod);

        if(diceMod < 0){
            base_attack = (Math.abs(diceMod) + 3) + "d20>8kl3";
        } else{
            base_attack = (diceMod + 3) + "d20>8";
        }

        console.log("Base Attack is: " + base_attack);

        setAttrs({
            atk_base_dice_roll : base_attack,
            atk_roll_tier : attribute_totals["tier_mod"]
        });
    };

    function calculateStatRoll(diceMod, toggle){
        var base_roll = (Math.abs(diceMod) + 3) + "d20";
        var operator;
        var power_formula;
        var type;

        if(toggle == "attack"){
            if(diceMod < 0){
                base_roll = base_roll.concat(">8kl3");
            } else {
                base_roll = base_roll.concat(">8");
            }
            operator = "*";
            power_formula = "(@{stat_roll_power_mod_ready} * " + attribute_totals["tier_mod"] + ")";
            type = "Success-Based";
        } else {
            if(diceMod < 0){
                base_roll = base_roll.concat("kl3");
            } else {
                base_roll = base_roll.concat("k3");
            }
            operator = "+";
            power_formula = "@{stat_roll_power_mod_ready}";
            type = "Additive";
        }

        console.log("Type is: " + type);
        console.log("Base Roll is: " + base_roll);
        console.log("Base Operator is: " + operator);
        console.log("PowerMod is: " + power_formula);

        setAttrs({
            stat_base_dice_roll : base_roll,
            stat_roll_operator : operator,
            stat_roll_type : type,
            stat_roll_power_formula : power_formula
        });

    }

    function calculateTierMod(){
        attribute_totals["tier_mod"] = Math.floor((attribute_totals["player_level"]/8) + 1);
    };

    function calculatePlayerLevelMod(){
        var level = attribute_totals["player_level"];
        switch(true){
                case level < 8:   attribute_totals["player_level_mod"] = 1; break;
                case level < 16:  attribute_totals["player_level_mod"] = 2; break;
                case level < 24:  attribute_totals["player_level_mod"] = 3; break;
                case level > 23:  attribute_totals["player_level_mod"] = 4; break;
            }
    };

    function calculatePointTotals(){
        attribute_totals["hp_max"] = attribute_totals["armorhp_mod"] * attribute_totals["vigor"];
        attribute_totals["mp_max"] = attribute_totals["essence"] * 2;
        attribute_totals["ap_max"] = (attribute_totals["armorap_mod"] * attribute_totals["tier_mod"]) + attribute_totals["focus"];
    };

    function capitalizeWord(string) {
      return string.charAt(0).toUpperCase() + string.slice(1);
    }

    /* ------------- Skill Sheet Functions ----------------------------- */

    const skill_incr = [
      "incr-forceful", "incr-cunning", "incr-inspiring", "incr-athletics",
      "incr-arcana",   "incr-craft",   "incr-culture",   "incr-influence",
      "incr-science",  "incr-skulduggery", "incr-survival"
    ];
    const skill_decr = [
      "decr-forceful", "decr-cunning", "decr-inspiring", "decr-athletics",
      "decr-arcana",   "decr-craft",   "decr-culture",   "decr-influence",
      "decr-science",  "decr-skulduggery", "decr-survival"
    ];
    const domains = [
      "athletics", "arcana", "craft", "culture",
      "influence", "science", "skulduggery", "survival"];

    skill_incr.forEach(button => {
      on('clicked:'+[button], function(){
        var skill = button.substring(5);
        console.log("Increasing " + skill + "...")
        attribute_totals[skill] += 1;

        if(IsParadigm(skill)){
          UpdateDomains(skill);
        }else{
          UpdateParadigms(skill);
        }

      });
    });

    skill_decr.forEach(button => {
      on('clicked:'+[button], function(){
        var skill = button.substring(5);
        console.log("Decreasing " + skill + "...")
        attribute_totals[skill] -= 1;

        if(IsParadigm(skill)){
          UpdateDomains(skill);
        }else{
          UpdateParadigms(skill);
        }

      });
    });

    function IsParadigm(skill){
      return (skill === "forceful" || skill === "cunning" || skill === "inspiring");
    }

    function UpdateParadigms(skill){
      var forcefulSkill = skill.concat("Forceful");
      var cunningSkill = skill.concat("Cunning");
      var inspiringSkill = skill.concat("Inspiring");

      attribute_totals[forcefulSkill] = attribute_totals[skill] + attribute_totals["forceful"];
      attribute_totals[cunningSkill] = attribute_totals[skill] + attribute_totals["cunning"];
      attribute_totals[inspiringSkill] = attribute_totals[skill] + attribute_totals["inspiring"];

      setAttrs({
        [skill]   : attribute_totals[skill],
        [forcefulSkill]  : attribute_totals[forcefulSkill],
        [cunningSkill]   : attribute_totals[cunningSkill],
        [inspiringSkill] : attribute_totals[inspiringSkill]
      });
    }

    function UpdateDomains(skill){
      var paradigm = skill.charAt(0).toUpperCase() + skill.slice(1);

      domains.forEach(function(domain){

        getAttrs([domain], function(values){

          const domainValue = attribute_totals[domain];
          const domainParadigm = domain.concat(paradigm);
          attribute_totals[domainParadigm] = domainValue + attribute_totals[skill];

          setAttrs({
            [skill]   : attribute_totals[skill],
            [domainParadigm] : attribute_totals[domainParadigm]
          });

          console.log("New Value: " + attribute_totals[domainParadigm]);

        });

      });
/*
            getAttrs([domain], function(values){
              console.log("Domain Call " + domain);
                const domainValue = attribute_totals[domain];
                const domainParadigm = domain.concat(paradigm);
                attribute_totals[domainParadigm] = domainValue + attribute_totals[skill];

                setAttrs({
                   [domainParadigm] : attribute_totals[skill]
                });
            });
*/
    }

</script>
